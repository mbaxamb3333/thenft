{"ast":null,"code":"'use strict';\n/**\n * Response error class\n */\n\nclass ResponseError extends Error {\n  /**\n   * Constructor\n   */\n  constructor(response) {\n    //Super\n    super(); //Extract data from response\n\n    const {\n      headers,\n      status,\n      statusText,\n      data\n    } = response; //Set data\n\n    this.code = status;\n    this.message = statusText;\n    this.response = {\n      headers,\n      body: data\n    }; //Capture stack trace\n\n    if (!this.stack) {\n      Error.captureStackTrace(this, this.constructor);\n    } //Clean up stack trace\n\n\n    const regex = new RegExp(process.cwd() + '/', 'gi');\n    this.stack = this.stack.replace(regex, '');\n  }\n  /**\n   * Convert to string\n   */\n\n\n  toString() {\n    const {\n      body\n    } = this.response;\n    let err = `${this.message} (${this.code})`;\n\n    if (body && Array.isArray(body.errors)) {\n      body.errors.forEach(error => {\n        const message = error.message;\n        const field = error.field;\n        const help = error.help;\n        err += `\\n  ${message}\\n    ${field}\\n    ${help}`;\n      });\n    }\n\n    return err;\n  }\n  /**\n   * Convert to simple object for JSON responses\n   */\n\n\n  toJSON() {\n    const {\n      message,\n      code,\n      response\n    } = this;\n    return {\n      message,\n      code,\n      response\n    };\n  }\n\n} //Export\n\n\nmodule.exports = ResponseError;","map":{"version":3,"sources":["/Users/mihaibadea/thenft/node_modules/@sendgrid/helpers/classes/response-error.js"],"names":["ResponseError","Error","constructor","response","headers","status","statusText","data","code","message","body","stack","captureStackTrace","regex","RegExp","process","cwd","replace","toString","err","Array","isArray","errors","forEach","error","field","help","toJSON","module","exports"],"mappings":"AAAA;AAEA;AACA;AACA;;AACA,MAAMA,aAAN,SAA4BC,KAA5B,CAAkC;AAEhC;AACF;AACA;AACEC,EAAAA,WAAW,CAACC,QAAD,EAAW;AAEpB;AACA,YAHoB,CAKpB;;AACA,UAAM;AAAEC,MAAAA,OAAF;AAAWC,MAAAA,MAAX;AAAmBC,MAAAA,UAAnB;AAA+BC,MAAAA;AAA/B,QAAwCJ,QAA9C,CANoB,CAQpB;;AACA,SAAKK,IAAL,GAAYH,MAAZ;AACA,SAAKI,OAAL,GAAeH,UAAf;AACA,SAAKH,QAAL,GAAgB;AAAEC,MAAAA,OAAF;AAAWM,MAAAA,IAAI,EAAEH;AAAjB,KAAhB,CAXoB,CAapB;;AACA,QAAI,CAAC,KAAKI,KAAV,EAAiB;AACfV,MAAAA,KAAK,CAACW,iBAAN,CAAwB,IAAxB,EAA8B,KAAKV,WAAnC;AACD,KAhBmB,CAkBpB;;;AACA,UAAMW,KAAK,GAAG,IAAIC,MAAJ,CAAWC,OAAO,CAACC,GAAR,KAAgB,GAA3B,EAAgC,IAAhC,CAAd;AACA,SAAKL,KAAL,GAAa,KAAKA,KAAL,CAAWM,OAAX,CAAmBJ,KAAnB,EAA0B,EAA1B,CAAb;AACD;AAED;AACF;AACA;;;AACEK,EAAAA,QAAQ,GAAG;AACT,UAAM;AAAER,MAAAA;AAAF,QAAW,KAAKP,QAAtB;AACA,QAAIgB,GAAG,GAAI,GAAE,KAAKV,OAAQ,KAAI,KAAKD,IAAK,GAAxC;;AACA,QAAIE,IAAI,IAAIU,KAAK,CAACC,OAAN,CAAcX,IAAI,CAACY,MAAnB,CAAZ,EAAwC;AACtCZ,MAAAA,IAAI,CAACY,MAAL,CAAYC,OAAZ,CAAoBC,KAAK,IAAI;AAC3B,cAAMf,OAAO,GAAGe,KAAK,CAACf,OAAtB;AACA,cAAMgB,KAAK,GAAGD,KAAK,CAACC,KAApB;AACA,cAAMC,IAAI,GAAGF,KAAK,CAACE,IAAnB;AACAP,QAAAA,GAAG,IAAK,OAAMV,OAAQ,SAAQgB,KAAM,SAAQC,IAAK,EAAjD;AACD,OALD;AAMD;;AACD,WAAOP,GAAP;AACD;AAED;AACF;AACA;;;AACEQ,EAAAA,MAAM,GAAG;AACP,UAAM;AAAElB,MAAAA,OAAF;AAAWD,MAAAA,IAAX;AAAiBL,MAAAA;AAAjB,QAA8B,IAApC;AACA,WAAO;AAAEM,MAAAA,OAAF;AAAWD,MAAAA,IAAX;AAAiBL,MAAAA;AAAjB,KAAP;AACD;;AAnD+B,C,CAsDlC;;;AACAyB,MAAM,CAACC,OAAP,GAAiB7B,aAAjB","sourcesContent":["'use strict';\n\n/**\n * Response error class\n */\nclass ResponseError extends Error {\n\n  /**\n   * Constructor\n   */\n  constructor(response) {\n\n    //Super\n    super();\n\n    //Extract data from response\n    const { headers, status, statusText, data } = response;\n\n    //Set data\n    this.code = status;\n    this.message = statusText;\n    this.response = { headers, body: data };\n\n    //Capture stack trace\n    if (!this.stack) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n\n    //Clean up stack trace\n    const regex = new RegExp(process.cwd() + '/', 'gi');\n    this.stack = this.stack.replace(regex, '');\n  }\n\n  /**\n   * Convert to string\n   */\n  toString() {\n    const { body } = this.response;\n    let err = `${this.message} (${this.code})`;\n    if (body && Array.isArray(body.errors)) {\n      body.errors.forEach(error => {\n        const message = error.message;\n        const field = error.field;\n        const help = error.help;\n        err += `\\n  ${message}\\n    ${field}\\n    ${help}`;\n      });\n    }\n    return err;\n  }\n\n  /**\n   * Convert to simple object for JSON responses\n   */\n  toJSON() {\n    const { message, code, response } = this;\n    return { message, code, response };\n  }\n}\n\n//Export\nmodule.exports = ResponseError;\n"]},"metadata":{},"sourceType":"script"}